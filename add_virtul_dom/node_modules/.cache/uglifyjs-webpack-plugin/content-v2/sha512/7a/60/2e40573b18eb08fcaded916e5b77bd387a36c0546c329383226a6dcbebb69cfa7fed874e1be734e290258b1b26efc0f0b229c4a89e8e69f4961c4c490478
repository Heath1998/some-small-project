{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),e.exports=n(5)},function(e,t){},function(e,t){function n(){this.subs={}}n.prototype.addSub=function(e){this.subs[e.uid]||(this.subs[e.uid]=e)},n.prototype.notify=function(e){for(var t in console.log(this.subs),this.subs)this.subs[t].update(e)}},function(module,exports){var $$id=0;function Compiler(e){this.$el=e.el,this.vm=e.vm,this.$el&&(this.$fragment=nodeToFragment(this.$el),this.compile(this.$fragment),this.$el.appendChild(this.$fragment))}function parseClassExp(e){if(e){var t=[];if(/\\{(.+?)\\}/g.test(e))(n=e.replace(/[\\s\\{\\}]/g,\"\").split(\",\")).forEach(function(e){var n='\"'+e.split(\":\")[0].replace(/['\"']/,\"\")+' \"',i=e.split(\":\")[1];t.push(\"((\"+i+\")?\"+n+':\"\")')});else if(/\\[(.+?)\\]/.test(e)){var n=e.replace(/[\\s\\[\\]]/g,\"\").split(\",\");t=n.map(function(e){return\"(\"+e+')+\" \"'})}return t.join(\"+\")}}function parseStyleExp(e){if(e){var t=[];if(/\\{(.+?)\\}/g.test(e))(n=e.replace(/[\\s\\{\\}]/g,\"\").split(\",\")).forEach(function(e){var n='\"'+e.split(\":\")[0].replace(/['\"`]/g,\"\")+':\"+',i=e.split(\":\")[1];t.push(n+i+'+\";\"')});else if(/\\[(.+?)\\]/g.test(e)){var n=e.replace(/[\\s\\[\\]]/g,\"\").split(\",\");t=n.map(function(e){return\"(\"+e+')+\";\"'})}return t.join(\"+\")}}function nodeToFragment(e){for(var t,n=document.createDocumentFragment();t=e.firstChild;)isIgnorable(t)?e.removeChild(t):n.appendChild(t);return n}function isIgnorable(e){return 8==e.nodeType||3==e.nodeType&&!/[^\\t\\n\\r]+/.test(e.textContent)}function checkDirective(e){var t={};if(0===e.indexOf(\"v-\")){var n=e.substring(2).split(\":\");t.type=n[0],t.prop=n[1]}else 0===e.indexOf(\"@\")?(t.type=\"on\",t.prop=e.substring(1)):0===e.indexOf(\":\")&&(t.type=\"bind\",t.prop=e.substring(1));return t}function parseTextExp(e){var t=/\\{\\{(.+?)\\}\\}/g,n=e.split(t),i=e.match(t),r=[];return n.forEach(function(e){i&&i.indexOf(\"{{\"+e+\"}}\")>-1?r.push(e):e&&r.push(\"`\"+e+\"`\")}),r.join(\"+\")}Compiler.prototype={compile:function(e,t){var n=this;e.$id=$$id++,e.childNodes&&e.childNodes.length&&[].slice.call(e.childNodes).forEach(function(e){3===e.nodeType?n.compileTextNode(e,t):1===e.nodeType&&n.compileElementNode(e,t)})},compileTextNode:function(e,t){var n=e.textContent.trim();if(n){var i=parseTextExp(n);t=t||this.vm,this.textHandler(e,t,i)}},compileElementNode:function(e,t){var n=[].slice.call(e.attributes),i=\"\",r=\"\",o=this;t=t||this.vm,n.forEach(function(n){var s=n.name,a=n.value,c=checkDirective(s);if(c.type){if(\"for\"===c.type||\"if\"===c.type)i=c.type,r=a;else{var u=o[c.type+\"Handler\"].bind(o);u?u(e,t,a,c.prop):console.error(\"找不到\"+c.type+\"指令\")}e.removeAttribute(s)}}),r?this[i+\"Handler\"](e,t,r):this.compile(e,t)},onHandler:function(e,t,n,i){if(!i)return console.log();var r=t[n];\"function\"==typeof r?e.addEventListener(i,r.bind(t)):e.addEventListener(i,function(){computeExpression(n,t)})},htmlHandler:function(e,t,n,i){var r=updater.html,o=this;new Watcher(n,t,function(n){r&&r(e,n,i),o.compile(e,t)})},ifHandler:function(e,t,n,i){this.compile(e,t);var r=document.createTextNode(\"\");e.parentNode.insertBefore(r,e);var o=e.parentNode.removeChild(e);this.bindWatcher(o,t,n,\"dom\",r)},textHandler:function(e,t,n,i){this.bindWatcher(e,t,n,\"text\")},modelHandler:function(node,scope,exp,prop){\"input\"===node.tagName.toLowerCase()&&(node.type,this.bindWatcher(node,scope,exp,\"value\"),node.addEventListener(\"input\",function(e){node.isInputting=!0;var newValue=e.target.value,calExp=exp+\"=`\"+newValue+\"`\";with(scope)eval(calExp)}))},forHandler:function(e,t,n,i){var r=this,o=n.split(\"in\")[0].replace(/\\s/g,\"\"),s=n.split(\"in\")[1].replace(/\\s/g,\"\").split(\".\"),a=e.parentNode,c=document.createTextNode(\"\"),u=document.createTextNode(\"\"),l=document.createRange();a.replaceChild(u,e),a.insertBefore(c,u);new Watcher(s.join(\".\"),t,function(n,i,s){l.setStart(c,0),l.setEnd(u,0),l.deleteContents(),n.forEach(function(n,i){var s=e.cloneNode(!0);a.insertBefore(s,u);var c=Object.create(t);c[o]=n,c.$index=i,r.compile(s,c)})})},bindHandler:function(e,t,n,i){switch(i){case\"class\":n='\"'+e.className+' \"+'+parseClassExp(n);break;case\"style\":n='\"'+e.getAttribute(\"style\")+';\"+'+parseStyleExp(n),console.log(n)}this.bindWatcher(e,t,n,\"attr\",i)},bindWatcher:function(e,t,n,i,r){var o=updater[i];new Watcher(n,t,function(t){o&&o(e,t,r)})}};var updater={html:function(e,t){e.innerHTML=void 0===t?\"\":t},text:function(e,t){e.textContent=void 0===t?\"\":t},value:function(e,t){e.isInputting||(e.value=t||\"\"),e.isInputting=!1},dom:function(e,t,n){t?n.parentNode.insertBefore(e,n):e.parentNode===n.parentNode&&n.parentNode.removeChild(e)},attr:function(e,t,n){t=void 0===t?\"\":t,e.setAttribute(n,t)},style:function(e,t,n){t=void 0===t?\"\":t,\"display\"===n&&(t=t?\"initial\":\"none\"),console.log(n),e.style[n]=t}}},function(e,t){},function(module,exports){var $uid=0;function Watcher(e,t,n){this.exp=e,this.scope=t,this.callback=n||function(){},this.value=null,this.uid=$uid++,this.update()}function computeExpression(exp,scope){try{with(scope)return eval(exp)}catch(e){console.error(\"ERROR\",e)}}function isEqual(e,t){return e==t||!(!isObject(e)||!isObject(t))&&JSON.stringify(e)===JSON.stringify(t)}function isObject(e){return null!==e&&\"object\"==typeof e}function deepCopy(e){return isObject(e)?JSON.parse(JSON.stringify(e)):e}Watcher.prototype={get:function(){Dep.target=this;var e=computeExpression(this.exp,this.scope);return Dep.target=null,e},update:function(e){var t=this.get();isEqual(this.value,t)||(this.callback&&this.callback(t,this.value,e),this.value=deepCopy(t))}}}]);","extractedComments":[]}